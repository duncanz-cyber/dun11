<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zeb11 Notepad</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
    }

    #toolbar {
      background: #0078D7;
      color: white;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #toolbar input[type="text"] {
      padding: 4px;
      border: none;
      border-radius: 3px;
    }

    #toolbar button {
      background: white;
      color: #0078D7;
      border: none;
      padding: 5px 10px;
      font-weight: bold;
      border-radius: 3px;
      cursor: pointer;
    }

    #status {
      margin-left: auto;
      font-size: 12px;
      color: #e0e0e0;
    }

    #tabs {
      display: flex;
      background: #e0e0e0;
      padding: 4px;
      overflow-x: auto;
    }

    .tab {
      background: white;
      border: 1px solid #ccc;
      padding: 4px 10px;
      margin-right: 4px;
      border-radius: 5px 5px 0 0;
      cursor: pointer;
    }

    .tab.active {
      background: #fff;
      font-weight: bold;
      border-bottom: none;
    }

    textarea {
      width: 100%;
      height: calc(100vh - 90px);
      border: none;
      padding: 10px;
      box-sizing: border-box;
      font-size: 16px;
      resize: none;
      outline: none;
      font-family: monospace;
    }
  </style>
</head>
<body>

<div id="toolbar">
  <span>Zeb11 Notepad</span>
  <input id="filename" type="text" placeholder="Filename">
  <input id="upload" type="file">
  <button onclick="saveFile()">Save</button>
  <button onclick="newTab()">+ New Tab</button>
  <button onclick="deleteTab()">Delete Tab</button>
  <span id="status">Words: 0 | Chars: 0</span>
</div>

<div id="tabs"></div>

<textarea id="editor" placeholder="Start typing..."></textarea>

<script>
  let tabs = [];
  let activeTab = null;

  const editor = document.getElementById('editor');
  const filenameInput = document.getElementById('filename');
  const tabsContainer = document.getElementById('tabs');
  const status = document.getElementById('status');

  // Setup initial tab
  newTab();

  editor.addEventListener('input', () => {
    if (activeTab) {
      activeTab.content = editor.value;
      updateStatus();
    }
  });

  function updateStatus() {
    const text = editor.value;
    const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
    const charCount = text.length;
    status.textContent = `Words: ${wordCount} | Chars: ${charCount}`;
  }

  function newTab() {
    const id = Date.now();
    const tab = {
      id,
      name: `Untitled-${tabs.length + 1}.txt`,
      content: ''
    };
    tabs.push(tab);
    setActiveTab(id);
    renderTabs();
  }

  function setActiveTab(id) {
    activeTab = tabs.find(t => t.id === id);
    if (activeTab) {
      editor.value = activeTab.content;
      filenameInput.value = activeTab.name;
      renderTabs();
      updateStatus();
    }
  }

  function renderTabs() {
    tabsContainer.innerHTML = '';
    tabs.forEach(tab => {
      const el = document.createElement('div');
      el.className = 'tab' + (tab === activeTab ? ' active' : '');
      el.innerText = tab.name;
      el.onclick = () => setActiveTab(tab.id);
      tabsContainer.appendChild(el);
    });
  }

  function deleteTab() {
    if (!activeTab) return;
    tabs = tabs.filter(t => t !== activeTab);
    if (tabs.length > 0) {
      setActiveTab(tabs[0].id);
    } else {
      newTab();
    }
  }

  function saveFile() {
    if (!activeTab) return;
    const content = editor.value;
    const filename = filenameInput.value || activeTab.name;
    activeTab.name = filename;
    renderTabs();

    const blob = new Blob([content], { type: "text/plain" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.click();
  }

  document.getElementById('upload').addEventListener('change', e => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(evt) {
        newTab();
        editor.value = evt.target.result;
        filenameInput.value = file.name;
        activeTab.name = file.name;
        activeTab.content = evt.target.result;
        updateStatus();
      };
      reader.readAsText(file);
    }
  });

</script>
</body>
</html>
